<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Made in Sud - Menu</title>

<style>
  :root{
    --black: #000;
  }

  html,body{
    height:100%;
    margin:0;
    background: url('sfondo.jpg') no-repeat center center/cover;
    font-family: 'Modica Ultra', sans-serif;
  }

  @font-face{
    font-family: 'Modica Ultra';
    src: url('fonts/ModicaUltra.ttf') format('truetype');
  }

  @font-face{
    font-family: 'Orbiga';
    src: url('fonts/orbiga.ttf') format('truetype');
  }

  .phone{
    width:390px;
    max-width:100%;
    margin:0 auto;
    padding:18px;
    box-sizing:border-box;
  }

  .logo img{
    width:100%;
    height:auto;
    display:block;
    transition: opacity 0.28s ease, transform 0.28s ease;
  }
  .logo img.fading{
    opacity:0;
    transform: scale(0.985);
  }

  .menu{
    margin-top:38px;
    display:flex;
    flex-direction:column;
    gap:18px;
  }

  .menu-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:34px;
    font-family: 'Orbiga', sans-serif;
    color:var(--black);
    cursor:pointer;
    padding:8px 0;
    user-select:none;
  }

  .menu-item .plus{
    font-size:34px;
    font-weight:bold;
    transition: transform 0.28s ease;
    display:inline-block;
  }
  .menu-item.open .plus{
    transform: rotate(180deg);
  }

  .submenu{
    overflow:hidden;
    max-height:0;
    opacity:0;
    transform: translateY(-6px);
    transition: max-height 0.45s cubic-bezier(.2,.9,.2,1), opacity 0.35s ease, transform 0.35s ease;
  }
  .submenu.open{
    max-height: 500px;
    opacity:1;
    transform: translateY(0);
  }

  .submenu .submenu-item{
    padding:8px 0 8px 18px;
    font-size:22px;
    color:var(--black);
    opacity:0;
    transform: translateY(6px);
    transition: transform 0.35s ease, opacity 0.35s ease;
  }

  .submenu.open .submenu-item{
    opacity:1;
    transform:none;
  }

  @media (max-width:420px){
    .menu-item{ font-size:30px; }
    .menu-item .plus{ font-size:30px; }
    .submenu .submenu-item{ font-size:20px; }
  }
</style>
</head>
<body>
  <div class="phone">
    <header class="logo">
      <img id="mainLogo" src="logo.png" alt="Made in Sud Pizza">
    </header>

    <nav class="menu" id="menuContainer">
      <!-- Categorie generate da JS -->
    </nav>
  </div>

<script>
  const categories = [
    { name: "Antipasti", logo: "antipasti.png", items: ["Gulash", "Lumache", "Polipo Arrosto"] },
    { name: "Friggitoria", logo: "friggitoria.png", items: ["Arancini", "Panzerotti", "Frittura Mista"] },
    { name: "Pizze", logo: "pizze.png", items: ["Margherita", "Diavola", "Capricciosa"] },
    { name: "Pucce", logo: "pucce.png", items: ["Puccia Prosciutto", "Puccia Vegetariana"] },
    { name: "Taglieri", logo: "taglieri.png", items: ["Salumi Misti", "Formaggi"] },
    { name: "Braceria", logo: "braceria.png", items: ["Costata", "Salsiccia", "Agnello"] },
    { name: "Bevande", logo: "bevande.png", items: ["Acqua", "Coca Cola", "Fanta"] },
    { name: "Cocktail", logo: "cocktail.png", items: ["Spritz", "Mojito", "Negroni"] },
    { name: "Birre", logo: "birre.png", items: ["Ichnusa", "Peroni", "Heineken"] },
    { name: "Vini", logo: "vini.png", items: ["Primitivo", "Negroamaro"] },
    { name: "Caffè & Amari", logo: "caffe.png", items: ["Caffè", "Amaro del Capo"] },
    { name: "Dolci", logo: "dolci.png", items: ["Tiramisù", "Panna Cotta"] }
  ];

  const menuContainer = document.getElementById('menuContainer');
  const logo = document.getElementById('mainLogo');

  function switchLogo(newSrc){
    logo.classList.add('fading');
    setTimeout(() => { logo.src = newSrc; }, 220);
    setTimeout(() => { logo.classList.remove('fading'); }, 260);
  }

  categories.forEach(cat => {
    const toggle = document.createElement('div');
    toggle.className = 'menu-item';
    toggle.innerHTML = `<span class="label">${cat.name}</span><span class="plus">+</span>`;
    
    const submenu = document.createElement('div');
    submenu.className = 'submenu';
    cat.items.forEach(item => {
      const subItem = document.createElement('div');
      subItem.className = 'submenu-item';
      subItem.textContent = item;
      submenu.appendChild(subItem);
    });

    toggle.addEventListener('click', () => {
      const isOpen = submenu.classList.contains('open');
      document.querySelectorAll('.submenu').forEach(sm => sm.classList.remove('open'));
      document.querySelectorAll('.menu-item').forEach(mi => mi.classList.remove('open'));
      document.querySelectorAll('.menu-item .plus').forEach(p => p.textContent = '+');

      if (!isOpen) {
        toggle.classList.add('open');
        submenu.classList.add('open');
        toggle.querySelector('.plus').textContent = '−';
        switchLogo(cat.logo);
      } else {
        switchLogo('logo.png');
      }
    });

    submenu.addEventListener('transitionend', () => {
      if (!submenu.classList.contains('open')) {
        switchLogo('logo.png');
      }
    });

    menuContainer.appendChild(toggle);
    menuContainer.appendChild(submenu);
  });
</script>
</body>
</html>
